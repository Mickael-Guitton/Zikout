<div class="banner mb-4">
  <img src="https://weezevent.com/wp-content/uploads/2018/08/27184514/organiser-un-concert-en-7-etapes.jpg" class="banner-img" >
</div>

<div class="d-flex">
  <%= render "venues/info_venue_show"%>

  <div class="col-9 ps-5">
    <div class="d-flex justify-content-between align-items-center">
      <h1><%= @event.name %></h1>

        <% unless @event.is_locked %>
          <% if @event.venue.user == current_user %>
            <%= button_to "Vérouiller Event", lock_event_path(@event), method: :patch, class: "button-custom", data: { confirm: "Êtes-vous sûr de vouloir vérouiller votre Event ?", turbo_confirm: "Êtes-vous sûr de vouloir cloturer votre Event ?" } %>
          <% end %>

          <% if current_user.role == "act" %>
            <div>
              <% if @already_applied %>
                <%= button_to "Annuler", event_participant_path(@event, @participant), method: :delete, class: "button-custom", data: { confirm: "Êtes-vous sûr de vouloir annuler votre candidature ?", turbo_confirm: "Êtes-vous sûr de vouloir cloturer votre Event ?" } %>
              <% else %>
                <%= button_to "Postuler", event_participants_path(@event), class: "button-custom", data: { turbo_method: :post } %>
              <% end %>
            </div>
          <% end %>
        <% end %>
        <% if @event.is_locked && @event.venue.user == current_user %>
          <%= button_to "Supprimer Event", event_path(@event), method: :delete, class: "button-custom", data: { turbo_confirm: "Êtes-vous sûr de vouloir supprimer votre Event ?" } %>
        <% end %>

    </div>

    <h4><%= @event.category %></h3>
    <p><%= @event.description %></p>

    <% if current_user == @event.venue.user || @participant_accepted.include?(current_user) %>
      <%= render "events/accepted-participants" %>
    <% end %>

    <% if @event.is_locked == false %>
      <%= render "events/waiting-participants" %>
    <% else %>
      <%= render "dashboard" %>
    <% end %>
  </div>
</div>
